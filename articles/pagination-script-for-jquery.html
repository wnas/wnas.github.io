<!DOCTYPE html><html><head><link rel="stylesheet" href="/main.css"></head><body><header><h1>WNAS</h1><nav class="nav"><ul class="nav--list"><li class=" nav--item"><a href="/" class="nav--link link">Home</a></li><li class=" nav--item"><a href="/about" class="nav--link link">About</a></li></ul></nav></header><article><h1>Pagination script for jquery</h1><time><span class="day">20</span><span class="month">4</span><span class="year">2010</span></time><p>A small script I wrote to do pagination, sorting and zebra-striping of a list.</p><p>As you can see we start of with a <strong>;</strong>, in case some sloppy programmer forgot to add it to the end of his function. Than as a first, we set our namespace as the first thing to do as we don&#39;t want to pollute the global namespace. The function is being set as a revealing module pattern.</p><pre><code>;var pagination = function () {</code></pre><p>We start with an object literal named <strong>config</strong> to contain the common variables, stuff we use more than once. These variables are private to this function only...</p><pre>    var config = {        // default amount to be shown        defAm : 15,        // radio buttons for sorting        sort : $(&#39;#sort input[type=&quot;radio&quot;]&#39;),        sortFirst : $(&#39;#sort input[type=&quot;radio&quot;]:first&#39;),        // several common classes        hidden: &#39;hidden&#39;,        sorted : &#39;sorted&#39;,        active : &#39;active&#39;    };</pre><p>We than initiate the function, this is the only thing we make public at the end of this function.</p><pre>    var init = function ( t ) {        // check the first radio, just in case ( to avoid problems )        config.sortFirst.attr(&#39;checked&#39;,&#39;checked&#39;);        // get the visible li&#39;s        var amountSort = $( t +&#39; li:visible&#39;).length;        // go to the view function.        view(t,amountSort);        // go and initialize the sorting function...        sort(t);        // as a last thing we get and initiate the script to handle the history stuff.        $.getScript(&#39;js/jquery.ba-hashchange.min&#39;,back(t));    };</pre><p>We first start with hiding the list items that need not be shown, the next pages so to speak... When we have done that, we go and build the paging stuff..</p><pre>    var view = function ( t,amountSort ) {        // hide all of the li&#39;s other than the ones on the first page.        $(t+&#39; li&#39;).removeClass(&#39;even&#39;);        $(t+&#39; li:visible:even&#39;).addClass(&#39;even&#39;);        // substract 1 to get the correct amount to be shown...        $(t+&#39; li:visible:gt(&#39;+(config.defAm-1)+&#39;)&#39;).addClass( config.hidden );        // go to paging.        paging(t,amountSort);    };</pre><p>We build the paging stuff and make it work.</p><pre>    var paging = function ( t,amountSort ) {        // first we clean up all of the old pagination        $(&#39;.pagination&#39;).remove();        // we than get the amount of pages        var nr = ((amountSort - ( amountSort % config.defAm ))/config.defAm)+1;        // build the paging ul before the sort radiobuttons        $(&#39;#sort&#39;).before(&#39;&lt;ul class=&quot;pagination&quot;&gt;&lt;/ul&gt;&#39;);        // loop through the pages, with the cool guy loop        for ( var i = -1; ++i &lt; nr;){            // append a li with an a to the ul.pagination for each page            // and fill it with the correct number            $(&#39;ul.pagination&#39;).append(&#39;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&#39;+(i+1)+&#39;&lt;/li&#39;);        }        // make visible that there is an active page.        $(&#39;ul.pagination li:first-child a&#39;).addClass( config.active);        // if we click on a pagination link        $(&#39;ul.pagination a&#39;).click( function (e) {            // get the correct page to show            // note the ,10) this makes sure we can&#39;t slip into octal mode...            var link = parseInt( $(this).text(),10);            showHide( t, link);            // now we need to enable the back button...            // we do this by setting the location for the hash tag plugin.            window.location = window.location.toString().split(&#39;#&#39;)[0] + &#39;#pagination&#39; +link;            // we stop the default action of the (fake) pagination link...            return false;        });    };</pre><p>This function is wat we use to do the showing and hiding. Note the nice and short :) jQuery selector at the bottom.</p><pre>    var showHide = function (t,link) {        // remove the active class        $(&#39;ul.pagination li a&#39;).removeClass( config.active );        // make the clicked one active        $(&#39;ul.pagination li:nth-child(&#39;+(link)+&#39;) a&#39;).addClass( config.active );        // show all of the li&#39;s        $(t + &#39; li&#39;).removeClass( config.hidden );        // hide all of the li&#39;s not on the correct &#39;page&#39;        // :) notice the nice and short jquery selector...        // it&#39;s like this: t = the overall container list.        // in there we find the li&#39;s without the class sorted = li:not(.sorted)        // either before the number being calculated = :lt(&#39;+(link-1)<em>(config.defAm)+&#39;),        // note that the number comes from the object literal in config and is therefore easily altered.        // or after that = &#39;+t + &#39; li:not(.sorted):gt(&#39;+link</em>(config.defAm-1)+&#39;)&#39;)        // and add a class to them...        // this class also comes from config as I use it more than once..        $(t+&#39; li:not(.sorted):lt(&#39;+(link-1)<em>(config.defAm)+&#39;), &#39;+t+&#39; li:not(.sorted):gt(&#39;+((link</em>config.defAm)-1)+&#39;)&#39;).addClass(config.hidden);        console.log(&#39;lt = &#39;+(link-1)<em>(config.defAm)+&#39; | gt = &#39;+(link</em>(config.defAm)))    }</pre><p>Here we do the sorting, by checking a radio button, gettings it&#39;s value and using that to show list items with that class and hiding others.</p><pre>    var sort = function ( t ) {        // on change        config.sort.change( function () {            // remove all of the sorted and hidden classes, thus making all li&#39;s visible            $(t+&#39; li&#39;).removeClass( config.sorted );            $(t+&#39; li&#39;).removeClass( config.hidden );            // get the value of the radio that is checked.            var v = $(this).val();            // if we selected a filtering option            if( !(v == &#39;nofilter&#39;)){                // hide all of the not chosen li&#39;s                $(t+&#39; li:not(.&#39;+v+&#39;)&#39;).addClass( config.sorted );            }            // go to the view function            // the two arguments are the list and the amount of visible li&#39;s (before paging)            view( t,$( t +&#39; li:visible&#39;).length );        });    };</pre><p>This small function utilize the hashchange plugin to make the back buttons work when we page through the <em>pages</em></p><pre>    var back = function (t) {        $(window).bind( &#39;hashchange&#39;, function(e) {            var hash = location.hash || &#39;#pagination1&#39;;            showHide( t, hash.split(&#39;pagination&#39;)[1]);        //    alert(&#39;movement...&#39;);        });    };</pre><p>Here we make the init function public.</p><pre>    return {        init: init    };}();</pre></article></body></html>